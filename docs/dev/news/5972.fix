Map range requires equality for enclosing type to support equality